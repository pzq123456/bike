# 一致性审查
> 该部分主要用于对比并该进论文中前后矛盾的部分

本文的主要研究步骤如下： 
（1）共享单车通勤数据建库：首先获取2016年8月及2020年8月上海市某品牌共享单车通勤数据（每条轨迹带有时间戳及起止点，其中2016年数据带有详细的骑行轨迹）；其次，进行数据预处理与清洗。针对2016年骑行轨迹数据，设计并实现轨迹重排序算法（3.2.2）、轨迹长度量测算法（3.2.2）及轨迹简化（抽稀）算法（3.2.3）。而后，针对轨迹长度、骑行时长、骑行速度、字段缺损状况等因素设计合理的数据清洗规则，剔除异常值；最后，计算每一段轨迹的起止点的GeoHash值，并将2016年骑行轨迹数据保存为便于存取的二进制格式（*.pickle），以便后续处理。
（2）上海市基础地理信息数据建库：首先从 Open Street Map 网站上下载上海市地理数据集（包含兴趣的、各级别路网等数据），并对数据进行裁剪及清洗；对于兴趣点数据，仅保留八类意义明确类型的数据；对于路网数据，仅提取主路、次主路及支路三个级别路网。然后，将兴趣的数据转化为 GeoHash 格式，并构建树状空间索引，以便快速查找最邻近的兴趣点；最后将空间索引及数据集保存为易于存取的二进制格式。
（3）共享单车通勤时间模式分析：借助预先建立的通勤数据库，从时间角度探究骑行通勤模式，分别从轨迹时距分布模式、单车日周转趋势，用户骑行时间间隔模式角度对用户骑行通勤模式进行分析，并探究背后的可能原因，总结相关规律。
（4）共享单车通勤空间模式分析：综合通勤数据库及上海市兴趣点数据库，从空间角度考察轨迹的空间分布模式。首先使用轨迹终点最近邻匹配算法（3.3.1）为每一段轨迹终点匹配最邻近兴趣点，并据此分析轨迹终点的类型占比及空间分布模式。然后使用线密度栅格来具体分析通勤轨迹空间分布模式及其与路网间的相似关系。最后根据潮汐指数来考察共享单车潮汐区域空间分布，并总结相关规律。

本文的研究数据包括骑行轨迹数据与上海市基本地理信息数据，其中骑行轨迹包括由互联网采集整理得到的 2016 年 8 月整月 102361 条上海市某品牌共享单车骑行轨迹数据及 2020 年 8 月整月 12793 条骑行记录，上海市基本地理信息数据包括由Open Street Map开源地理信息数据网站获取上海市路网矢量与兴趣点分布矢量数据及由高德地图开放平台获取的上海市矢量边界数据。
2016 年骑行记录数据较为详细，除了常见的骑行起止时间及起止点位置字段外，还包含了一个以“#”分隔的骑行轨迹点字段，但是由于网络延迟、设备故障等原因该字段内的轨迹点为乱序排列，需要设计算法以恢复正确的骑行轨迹，并且骑行实际距离也需要根据正确的轨迹数据计算（见 3.2.2）。2020 年骑行记录并未包含详细的骑行轨迹点集，但提供骑行距离。对于骑行记录数据，按照如下规则清洗：1）去除骑行时长小于1分钟大于 8 小时的骑行记录；2）对于有轨迹点集的数据，去除记录到的轨迹点数量小于 3 的记录；3）去除存在字段缺失及异常符号的记录；4）去除骑行终点位于上海市之外的记录，该记录超出研究区域。
