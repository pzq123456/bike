# Planning Bike Lanes based on Sharing-Bikes’ Trajectories
## ABSTRACT 

Cycling as a green transportation mode has been promoted by many governments all over the world. As a result, constructing effective bike lanes has become a crucial task for governments promoting the cycling life style, as well-planned bike paths can reduce traffc congestion and decrease safety risks for both cyclists and motor vehicle drivers. Unfortunately, existing trajectory mining approaches for bike lane planning do not consider key realistic government constraints: 1) budget limitations, 2) construction convenience, and 3) bike lane utilization.

In this paper, we propose a data-driven approach to develop bike lane construction plans based on large-scale real world bike trajectory data. We enforce these constraints to formulate our problem and introduce a exible objective function to tune the benefit between coverage of the number of users and the length of their trajectories. We prove the NP-hardness of the problem and propose greedy-based heuristics to address it. Finally, we deploy our system on Microsoft Azure, providing extensive experiments and case studies to demonstrate the effectiveness of our approach.

## 1 INTRODUCTION

Cycling as a commonly used urban transit mode for daily commute has been promoted by multiple governments all over the world [1, 40] for several reasons: 1) it is an affordable and environment-friendly transportation mode for users; 2) it reduces road traffc congestion; and 3) it is a healthy lifestyle [31]. As a result, building effective bike lanes, demonstrated in Figure 1a, becomes a vital task for governments to promote the cycling lifestyle. Well planned & implemented bike lanes not only make cycling easier, but also reduce the safety risks for both cyclists and drivers of motor vehicles [30].

Traditional approaches to planning bike lanes in a city rely mainly on empirical experience and surveys [12, 18, 32]. With widespread availability of GPS embedded devices, more data-driven approaches on planning bike lanes have emerged, e.g., [10, 11, 19]. However, existing works [10, 11, 19] merely focus on summarizing commonalities of bike trajectory data while ignoring the realistic constraints and requirements faced by the government:

- Budget Limitations. There are costs to realizing a bike lane on a road segment, which may include: 1) the space for creating bike lanes; and 2) the price of building bike lane railing, and painting signs (demonstrated in Figure 1(a)). Unfortunately, governments often have limited budgets.
- Construction Convenience. To implement the bike lanes, construction teams need to be dispatched to construction zones, with the number of teams required also being a hard constraint. For the sake of ease of management, the government would like to avoid spreading teams out to construction zones in far reaching locations (e.g., red lines in Figure 1(b) highlights the top-100 segments with the most bike trajectories), and prefer to have them clustered, i.e., as a limited number of connected components in the road network.
- Bike Lane Utilization. As a public service, from the government’s point of view, the objective of building bike lanes is to increase the usability for more bikers and cover more possible routes.

To incorporate these real world constraints, in this paper, we propose a data-driven approach for planning the bike lanes based on the massive number of trajectories collected from Mobike 1 users. Mobike is a fully station-less bike-sharing system currently deployed in many large cities in China. It is the world’s largest bike operator, and recently made Shanghai the world’s largest bikeshare city. Compared to the traditional station-based bike sharing system, trajectories generated by Mobike users have two distinctive advantages in tackling the bike lane planning problem:

- Realistic Travel Demands. Unlike many existing stationbased bike sharing systems, which require the users to pick up and drop off bikes from designated stations, Mobike offers a more exible system, where the users can pick up and drop off their bikes at arbitrary locations (Figure 2(a)). As a result, the trajectories of Mobike users reect actual urban travel demands.
- Rich Travel Information. A 3G communication component and a GPS module are embedded on the lock system in Mobike (demonstrated in Figure 2(b)), which enables the users to find bikes with their phones. It also keeps the track of the exact route traversed by the users (Figure 2(c)), while the traditional station-based bike sharing system can only provide the check-in/out information.

In this paper, we design, implement and deploy a data-driven bike lane planning system on Microsoft Azure, which not only leverages the massive bike trajectories generated by thousands of Mobike users, but also fulfills the constraints and objectives requested by the government. The proposed system contains two main components: 1) Pre-Processing, which pre-processes the trajectories from the Mobike user and maps them on the road network; and 2) Bike Lane Planning, which takes the user’s input (i.e., requirements from the government) and provides bike lane suggestions. The main contributions are summarized as follows:

- We formulate the bike lane planning problem by considering various construction constraints, and propose a exible tuning parameter to characterize the design trade-off between the number of covered users and the length of the continuously covered bike trips. The problem proves to be NP-hard.
- We propose a greedy network expansion algorithm, which provides a scalable and approximate solution to the data-driven bike lane planning problem. To achieve a better effectiveness, we also propose two different approaches to initialize the algorithm, which work well for low and high budget scenarios, respectively.
- We evaluate the proposed algorithms extensively over one month Mobike trajectory data (i.e., from 9/1/2016 - 9/30/2016) from the City of Shanghai. We also provide an extensive data analysis and discover many useful insights. Moreover, on-field case studies are conducted to evaluate the effectiveness of our bike lane recommendations.
- An online system with the real dataset is deployed and available on Microsoft Azure [2]. Finally, we collect the feedback from the government offcials, from which our system received very positive reviews.

The rest of the paper is organized as follows: Section 2 describes the problem definition and the system overview. Section 3 presents the pre-processing module. Bike lane planning module is presented in Section 4. Experiments and case studies are given in Section 5. Section 6 presents the system deployment details and the expert reviews. Related works are summarized in Section 7. Section 8 concludes the paper.

## 7 RELATED WORK
In this section, we summarize the related works in three main areas: 1) data-driven urban planning, 2) trajectory data mining, and 3) traditional bike lane planning methods.


Data-Driven Urban Planning. With the availability of massive amounts mobility data from users, vehicles and public transportation systems, urban computing techniques have become more and more popular in many urban planning tasks, as the massive mobility data reects real travel demands in the physical world [38]. For example, [39] mines patterns in taxi trajectories to suggest road constructions and public transportation projects. [35] infers different function zones in a city based on traffc patterns and POI distribution. [5, 17] identify potential traffc patterns and anomalies in the city based on multiple mobility datasets. In this paper, we focus on providing a data-driven approach to find a more effective and economic way for bike lane planning.


Trajectory Data Mining. The bike lane planning problem is related to the trajectory data mining [6, 16, 21, 22, 24, 26, 27, 34]. Many systems have been proposed to discover frequently used routes based on massive trajectory data, e.g., [6, 15, 16, 21, 26, 27]. There are also some projects on clustering/summarizing trajectories on the road network [13, 20], which help urban planners to know the popular routes and improve public transportation system. The closest projects on bike trajectory mining are [10, 11, 19], which focus on summarizing the trajectory commonality and find out the K-Primary Corridors for bike lanes. However, all of these works can not be directly used for bike lane planning, as they fail to consider the realistic budget and connectivity constraints.


Traditional Bike Lane Planning. Traditional bike lane planning in a city is mainly studied in the transportation domain, and relies heavily on the empirical experience, e.g., [8, 12]. To evaluate the necessity of building bike lanes, [29, 32] provide some high level suggestions based on public surveys and the geographical statistics, such as the road network and POI distributions. There have been some attempts [18] to systematically discover factors for actual bike route choices based on survey data. Recently, there have also been some works on traffc predication and route suggestion based on the station-based bike-sharing systems, e.g., [23, 25].


## 8 CONCLUSION
In this paper, we propose a data driven approach to plan bike lanes based on the real bike trajectories collected from Mobike (a major station-less bike sharing system) in the City of Shanghai. Our system can address the bike lanes planning problem in a more realistic way, considering the constraints and requirements from urban planners’ perspective: 1) budget limitations, 2) construction convenience, and 3) bike lane utilization. We also propose a exible beneficial score function to adjust preferences between the number of covered users and the length of covered trips. The formulated problem is proven to be NP-hard, thus we propose a greedy network expansion algorithm with two different initialization methods: top-k based and spatial clustering.

We perform extensive experiments on a large scale Mobike data and demonstrate the effectiveness of our proposed bike lane planning framework, where interesting trade-off phenomena are observed namely the top-k based (resp. spatial clustering based) initialization approach works well with low (resp. high) construction budgets. We also conduct an on-field case study based on our path recommendation results, and present many important insights to improve cycling convenience in a given area. A demonstration system is deployed on Microsoft Azure for public use, and the expert feedback from the government offcials from Xuhui District, Shanghai, confirms the effectiveness and usability of our system. 

Finally, in future work, we plan to use the parallel computing framework in Microsoft Azure to improve system response time to work more effciently with larger trajectory datasets. Also, we would like to further explore the interactive planning process to incorporate more human intelligence.
