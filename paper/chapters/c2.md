# 第二章 理论基础与相关技术
> = word 6 pages
## 2.1 相关理论基础

### 2.1.1 行为地理学

行为地理学是人文地理学的一个重要分支[12]，该学科在 20 世纪初期诞生，是地理学、心理学、行为科学的交叉学科，在后来的发展中逐步融合行为主义地理学与时间地理学两大理论基础，形成了一套相对完善的研究范式与理论体系。该学科主要探讨人与地理环境之间的互动，强调“以人为本”，从微观人地关系的研究出发探索宏观时空规律。受到行为经济学中将非理性的经济主体作为微观研究的对象启发，行为地理学所研究的“人”是一种有限理性的个体，这些个体的行为虽然受到地理环境等的客观制约而呈现出一定规律性，但也会出于主观做出一些随机行为。个体可以依据属性汇总为群体、可以依据社交网络与空间活动范围汇总为社群，这些不同类别不同层次的群体同样被归为“人”这一研究对象。行为地理学所研究的“地”指的是一种抽象的、主客观相结合的行为空间，比如城市意向、认知空间等。行为地理学强调人地关系的统一性，人与地相互依赖、相互影响、相互塑造，这二者是不可分割的。

与传统的将研究区域视作静态的“块”不同，行为地理学的研究强调动态性，这种动态性体现在：1）其研究图景是一个具有复杂时空流动模式的网络：个体与个体之间、个体与环境之间均存在复杂的互动关系，甚至这些关系本身也相互制约相互影响，这种有机的网络模型所具有的动态性是传统的静态区域块模型所无法比拟的；2）研究视野综合了宏观与微观并可动态调整：通过汇总个体行为，总结区域规律来不断扩大研究视野。通过不断缩小研究视野，深挖“人”这一复杂个体全生命周期内在认知的流变规律，更好地关怀个体生命质量；3）数据及对应处理方法层面的动态性：移动互联网、GPS 和移动位置服务(location-based services，LBS)等技术提供实动态数据支撑，人工智能、大数据技术等先进的数据处理手段提供快速动态的分析能力。

随着时代的发展，“人本主义”日益得到社会各界的认同，着重研究人的日常行为及其与环境的交互关系的行为地理学也越发受到重视。行为地理学以其独特的研究视角，在可持续发展、社会公平、国土空间规划与社会治理等方面发挥出越来越大的作用。

### 2.1.2 城市职住平衡与过剩通勤理论

随着中国城镇化水平不断提高，城市交通拥堵问题日益凸显，其背后城市交通巨大供需失衡问题也逐渐被社会各界所认识。对于城市居民而言，住所与工作地点相距甚远往往会带来巨大的通勤压力，这也是城市交通拥堵的一个重要原因。研究并达成职住平衡可以有效缓解城市交通拥堵，职住平衡理论也可以为城市规划提供有用的指导。职住平衡理论（Jobs-Housing Balance）[13]最早由 Howard 在1902年出版的书籍《明日田园城市》中提出，他认为应当建设一种具有“自力性”（Self-contained）的社区，这种社区能够确保居民的就业需求与住房需求一并得到满足，最终由众多具有“自力性”的社区组成“田园城市”。这样的“田园城市”可以有效缓解交通拥堵及环境污染，减轻居民通勤压力，缩减中低收入家庭开支提升幸福感。

将多种城市功能理想化地集成在许多相互离散的小块土地上，这种理想化的城市模式在现实中往往难以实现。“职住分离”的现状是市场长期自主选择的结果，一方面企业追求产业聚集带来的规模效益，企业以零散的方式分布于小片地块会降低生产效率提高管理成本，另一方面，求职者更愿意为了高薪前往较远的工作地就职，随着城市公共交通系统的发展，通勤成本不断下降，这种职住距离还会被进一步拉远。另外，对于一个具体的家庭而言，求职并不是选择居住地唯一需求，医疗保健、子女求学及休闲放松等综合需求同样重要，尤其是优质的公共服务资源（重点学校、三甲医院等）往往成为一个家庭选择居住地的主要因素，单纯强调职住一体并不能很好地满足家庭的综合性需求。因此，需要客观看待城市职住分离的现状，着重研究城市通勤现状，过剩通勤可以作为衡量一个城市职住平衡的量化指标，较为客观地反映城市通勤现状。

过剩通勤（excess commuting）指的是实际通勤距离与理论通勤距离之间的差值，该理论最早在 1982 年由 Hamilton 首先提出，经过三十多年的发展逐步形成了一套较为完善的理论体系。在城市建模方面，该领域最早将城市建模为单中心模型，认为城市中心提供了所有的就业机会。后来随着计算机技术及地理信息系统的发展，有学者使用泰森多边形将城市划分为多个职住格网，更精细地建模城市职住空间分布情况。在理论通勤距离计算方面，主要计算方法包括：1）交通问题线性规划最优化函数（Transportation Problem in Linear Programming, TPLP）：采用线性规划的方法，以交通成本最小为优化目标，职住人数分布守恒为约束条件求解理论通勤距离；2）最大熵值法与蒙特卡罗仿真模型：最大熵值法是一种基于信息论的随机模拟方法，计算简单，不需要大量数据。蒙特卡罗模拟是一种基于随机抽样的统计方法，灵活性高，计算量大，结果受随机抽样影响；3）等比例匹配通勤：认为就业岗位分配与企业所占区域在区域中的比例相同。其中，TPLP 的其基本原理是将城市中的就业岗位和居住地视为节点，将通勤视为弧线，并以交通成本最小化为目标，求解所有居民的通勤路径和通勤距离。

$$ T_{min} = \frac{1}{W} \sum_{i=1}^{n} \sum_{j=1}^{m} c_{ij} X_{ij} $$

其中，$T_{min}$ 为最小平均通勤距离，$W$ 为城市通勤总人口，$n$ 为城市居民总数，$m$ 为城市就业岗位总数，$c_{ij}$ 为居民 $i$ 与就业岗位 $j$ 之间的通勤成本（一般为距离），$X_{ij}$ 为居民 $i$ 与就业岗位 $j$ 之间的通勤量（一般为人数）。

上述公式需要满足如下约束条件：

$$ \sum_{i=1}^{n} X_{ij} =O_i , \quad j = 1, 2, \ldots, m $$
$$ \sum_{j=1}^{m} X_{ij} =D_j , \quad i = 1, 2, \ldots, n $$

其中，$O_i$ 为居民 $i$ 的出发地，$D_j$ 为就业岗位 $j$ 的目的地。

居民实际通勤情况可以使用问卷调查、GPS 轨迹数据、公交刷卡数据等方式获取，通过计算实际通勤距离 $T_{act}$ 结合理论通勤距离 $T_{min}$ 可以计算出过剩通勤率 $C_{ex}$：

$$ C_{ex} = \frac{T_{act} - T_{min}}{T_{min}} \times 100\% $$

## 2.2 相关研究技术
### 2.2.1 相似性分析
相似性分析指的是依据某种相似性度量指标，计算并判别两个或多个对象间的相似程度，常用于医学、市场营销、犯罪学、计算机视觉等领域。地理学领域内的相似性分析一般强调对象间空间分布的相似性，有些研究也会同时考虑时间维度的相似性，即对象间的时空分布相似性。相似性分析的核心是相似性度量指标，由于这些指标一般针对高维数据间的度量设计，空间数据若不考虑属性至多只有3个纬度，所以也可以直接套用多数指标。常用的相似性度量指标有：欧氏距离、曼哈顿距离（3.2.2）、余弦距离、Jaccard 系数（3.3.3）等。

但是，时空数据（尤其是时空轨迹数据）有其自身的特殊性，它是以时间顺序记录的移动对象位置序列，具有动态性，即同一个对象在不同时刻具有不同位置属性。这与一般相似性分析的静态数据（如带有诸多静态属性数据的人或物）具有较大差别。因此，也存在一些细致考察了轨迹的时空结构特征的相似性度量算法：1）轨迹间欧氏距离：将待分类轨迹视作随时间变动的点集，在每一个时间断面计算轨迹点间的欧氏距离并在全局时间轴方向上累积。对噪声敏感，需要采样频率一至，否则会有较大误差。2）最小外包络距离：首先使用轨迹特征点（方向快速变化的点）切分轨迹，然后提取这些子段的外包络矩形并组成顺序序列作为轨迹的概化表征，最后累计矩形间的距离以度量轨迹间的相似性。该方法对原始轨迹平滑去噪，但也会丢失一部分信息。3）子轨迹相似性度量[11]（TRACLUS）：该算法首先根据最小描述长度原则将轨迹划分为多个子轨迹，然后计算子轨迹间的三种距离（垂直距离、平行距离、角度距离）并加权计算的综合相似性量值。4）历史最近距离：在一段给定的时间范围内，检查各个时刻两个轨迹之间的距离（欧氏距离或其他），选取最小距离作为历史最近距离。

相似性分析可以揭示大量数据间的多种共性特征，因此也是其他更深一步的数据分析方法（聚类分析）的重要前置步骤和关键组成部分。时空数据由于有时需要考虑细致的时空结构，所以需要设计相应的特殊相似性度量算法。

### 2.2.2 密度分析
密度分析是一种空间分析方法，用于计算和可视化点要素或线要素的集中程度以及分布模式，其中，密度是指单位面积内的要素数量（点的个数或线的长度）。密度分析的本质是将离散的点要素或线要素数据转换为连续的密度表面。密度表面可以直观地反映出要素的分布模式，并为进一步的空间分析提供基础。根据计算方法的不同，密度分析可大致分为以下几类：1）简单点密度分析: 该方法将每个点的测量值除以其邻域的面积来计算密度。邻域可以是固定大小的圆形或方形区域，也可以是某种自定义形状。2）距离加权密度分析：在计算密度时，考虑要素到参考点的距离，根据距离赋予权值。3）核密度分析: 该方法使用核函数来计算输出栅格像元周围的点要素的密度。

线密度分析与点密度分析具有类似的思想，即统计一定邻域内要素分布情况。线密度一般定义为单位面积内累计线要素的长度，使用圆形作为邻域来统计线要素密度。线密度计算有时需要考虑权重，即不同线要素对密度的贡献不同。线密度可用于野生动物迁徙路径、城市管网、城市道路等领域的分析，基于其生成的密度栅格还可进行相似性分析、路网提取等进一步分析。假设有两类线要素，分别用 $L1$ 和 $L2$ 表示，其权重分别为 $V1$ 和 $V2$，搜索半径为 $R$，则线密度 $D$ 可以表示为：

$$ D = \frac{L1 \times V1 + L2 \times V2}{\pi \times R^2} $$


### 2.2.4 用户行为分析
<!-- 标记为AIGC -->
用户行为分析（User behavior analytics）是一种通过分析用户使用数据来了解用户行为模式的方法。企业可以收集用户点击次数、登录时间、浏览时长等数据，并通过数据挖掘、模式分析等手段进行分析。用户行为分析可以帮助企业在不打扰用户的情况下（相较于发放用户问卷）更好地了解用户群体，从而提升服务质量。此外，高效及时的用户行为分析还可以防范恶意攻击（例如DDoS攻击），过滤异常账号（刷单诈骗）。一些常用的用户数据挖掘方法包括统计用户使用频率并划分用户等级、计算并绘制用户贡献累计分布曲线（CDF曲线）、计算用户留存率等。其中，用户留存率（User Retention Rate）是一个用于衡量产品吸引力及用户粘性的重要指标，它指的是在某一时间段内开始使用产品或服务的用户，经过一段时间后仍然继续使用该产品或服务的用户的比例。
<!-- 标记为AIGC -->
夏琼燕等人[14]下载并研究了2005年到2007年 Open  Street  Map 开源地理信息网站中志愿者用户数据（记录了用户的贡献行为），通过计算用户贡献累计分布曲线，他们发现该网站的贡献者符合“二八定律”，即该网站两成的贡献者贡献了约80%的数据，并根据贡献率将用户分为多个活跃等级。通过合理选取时间窗口，计算用户留存率，结合用户活跃度分类，他们发现OSM社区中低活跃度的用户留存率偏低，而高活跃度用户总体保持稳定，社区稳定存续主要依靠中高活跃度用户。

## 2.3 本章小结
本章主要内容为相关理论概念及研究技术。相关理论部分首先介绍行为地理学，探讨人与地理环境灵活多变的互动关系，指出“以人为本”的思想观念越来越受到社会各界重视，而后，该部分开始探讨职住平衡理论，该理论认为职住空间应当尽可能均匀地分布于城市，然而绝大多数城市的实际情况却是“职住分离”与“产业聚集”，为了客观地考察城市职住动态分布情况，人们从城市通勤入手提出了过剩通勤系列指标。相关研究技术部分主要从空间分析及行为分析两个方向入手，空间分析方向主要介绍了常见的聚类分析及密度分析方法，行为分析方向主要介绍了用户粘性分析等几种常见的用户数据挖掘方法。

## References
[11]任丹. 基于TRACLUS算法的船舶轨迹分析系统的设计与实现[D].辽宁师范大学,2021.DOI:10.27212/d.cnki.glnsu.2020.001211.
[12]塔娜,柴彦威.行为地理学的学科定位与前沿方向[J].地理科学进展,2022,41(01):1-15.
[13]杨超,汪超.城市过剩通勤与职住平衡模型[J].同济大学学报(自然科学版),2013,41(11):1712-1716.
[14]夏琼燕,罗冠,张翔,等.OpenStreetMap志愿者贡献与留存分析[J].测绘与空间地理信息,2021,44(02):90-93+97.