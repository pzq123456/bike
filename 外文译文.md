# Planning Bike Lanes based on Sharing-Bikes’ Trajectories
## 摘要

自行车作为一种环保的交通方式已经被世界各地的许多政府所推广。因此，建设有效的自行车道已经成为推广骑行生活方式的政府的重要任务，因为规划良好的自行车道可以减少交通拥堵，降低骑行者和机动车驾驶员的安全风险。不幸的是，现有的自行车道规划轨迹挖掘方法并未考虑到关键的现实政府约束：1）预算限制，2）施工便利性，和3）自行车道利用率。

在本文中，我们提出了一种基于大规模真实世界自行车轨迹数据开发自行车道建设计划的数据驱动方法。我们强制执行这些约束条件来制定我们的问题，并引入了一个灵活的目标函数来调节用户数量的覆盖范围和其轨迹长度之间的收益。我们证明了该问题的NP-难度，并提出了基于贪婪算法的启发式方法来解决它。最后，我们在Microsoft Azure上部署了我们的系统，提供了广泛的实验和案例研究，以展示我们方法的有效性。

## 引言
自行车作为日常通勤常用的城市交通方式，已经被世界各地的多个政府所推广，原因有几点：1）对用户来说，它是一种价格实惠且环保的交通方式；2）它减少了道路交通拥堵；3）它是一种健康的生活方式。因此，建设有效的自行车道（如图1a所示）已经成为政府推广骑行生活方式的重要任务。规划良好并实施得当的自行车道不仅使骑行更加便利，还减少了骑行者和机动车驾驶员的安全风险。

传统的城市自行车道规划方法主要依赖于经验和调查。随着GPS嵌入式设备的普及，基于数据驱动的自行车道规划方法也逐渐出现，例如，现有的一些研究仅仅聚焦于总结自行车轨迹数据的共性，而忽略了政府面临的现实约束和需求：

- 预算限制。在道路段上实现自行车道存在成本，其中可能包括：1）为创建自行车道而需要的空间；和2）建造自行车道栏杆和绘制标志的费用（如图1(a)所示）。不幸的是，政府经常预算有限。
- 施工便利性。为了实施自行车道，需要向施工区派遣施工队，所需的队伍数量也是一种硬性约束。为了便于管理，政府希望避免将团队分散到偏远地区的施工区域（例如，图1(b)中红色线条突出显示了具有最多自行车轨迹的前100个段），而是更倾向于将它们聚集在一起，即在道路网络中作为有限数量的连通组件。
- 自行车道利用率。从政府的角度来看，建造自行车道的目标是增加更多骑行者的可用性并覆盖更多可能的路线，作为公共服务。

为了纳入这些现实约束，本文提出了一种基于从摩拜1用户收集的大量轨迹的数据驱动方法，用于规划自行车道。摩拜是一种完全无桩的共享单车系统，目前在中国的许多大城市部署。它是世界上最大的自行车运营商，并最近使上海成为了世界上最大的共享单车城市。与传统的基于站点的共享单车系统相比，摩拜用户生成的轨迹在解决自行车道规划问题时具有两个独特的优势：

- 真实的出行需求。与许多现有的基于站点的共享单车系统不同，这些系统要求用户从指定的站点取车和还车，摩拜提供了一个更灵活的系统，用户可以在任意位置取车和还车（如图2(a)所示）。因此，摩拜用户的轨迹反映了实际的城市出行需求。
- 丰富的出行信息。摩拜的锁系统上嵌入了一个3G通信组件和一个GPS模块（如图2(b)所示），使用户可以通过手机找到自行车。它还记录了用户所经过的确切路线（如图2(c)所示），而传统的基于站点的共享单车系统只能提供用户的登记/退车信息。

在本文中，我们设计、实现并部署了一个基于Microsoft Azure的数据驱动自行车道规划系统，该系统不仅利用了数千名摩拜用户生成的大量自行车轨迹，还满足了政府提出的约束和目标。所提出的系统包含两个主要组件：1）预处理，用于预处理来自摩拜用户的轨迹，并将其映射到道路网络上；2）自行车道规划，该组件接受用户输入（即政府的要求）并提供自行车道建议。主要贡献总结如下：

- 我们通过考虑各种施工约束来形式化自行车道规划问题，并提出了一个灵活的调节参数，以表征覆盖用户数量和连续覆盖自行车行程长度之间的设计权衡。该问题证明是NP-难的。
- 我们提出了一种贪婪的网络扩展算法，为基于数据驱动的自行车道规划问题提供了可扩展且近似的解决方案。为了获得更好的效果，我们还提出了两种不同的算法初始化方法，分别适用于低预算和高预算情况。
- 我们对来自上海市的一个月摩拜轨迹数据（即2016年9月1日至2016年9月30日）进行了广泛评估。我们还进行了广泛的数据分析，并发现了许多有用的见解。此外，我们进行了现场案例研究，以评估我们自行车道建议的有效性。
- 我们部署了一个包含真实数据集的在线系统，并在Microsoft Azure上提供了该系统。最后，我们收集了政府官员的反馈，我们的系统收到了非常积极的评价。

论文的其余部分组织如下：第2节描述了问题定义和系统概述。第3节介绍了预处理模块。第4节介绍了自行车道规划模块。实验和案例研究在第5节给出。第6节介绍了系统部署细节和专家评价。相关工作在第7节总结。第8节总结了论文。

## 相关工作
在本节中，我们总结了三个主要领域的相关工作：1）基于数据驱动的城市规划，2）轨迹数据挖掘，和3）传统的自行车道规划方法。

基于数据驱动的城市规划。随着用户、车辆和公共交通系统大量移动数据的可用性，城市计算技术在许多城市规划任务中变得越来越受欢迎，因为大量的移动数据反映了现实世界中的真实出行需求。例如，[39]挖掘出租车轨迹中的模式，以建议道路建设和公共交通项目。[35]根据交通模式和POI分布推断出城市中不同的功能区。[5, 17]根据多个移动数据集在城市中识别潜在的交通模式和异常情况。在本文中，我们专注于提供一种基于数据驱动的方法，以寻找更有效和经济的自行车道规划方式。

轨迹数据挖掘。自行车道规划问题与轨迹数据挖掘相关。许多系统已经提出，基于大量轨迹数据发现经常使用的路线，例如，有些项目聚类/总结道路网络上的轨迹，这有助于城市规划者了解热门路线并改进公共交通系统。最接近的自行车轨迹挖掘项目是[10, 11, 19]，它们专注于总结轨迹的共性，并找出自行车道的K-Primary走廊。然而，所有这些工作都不能直接用于自行车道规划，因为它们未考虑到现实中的预算和连接约束。

传统的自行车道规划。城市中的传统自行车道规划主要在交通领域进行研究，并且严重依赖经验经验，例如，为了评估建设自行车道的必要性，[29, 32]基于公共调查和地理统计数据提供了一些高层建议，如道路网络和POI分布。一些尝试[18]基于调查数据系统地发现实际自行车路线选择的因素。最近，还有一些基于基于站点的共享单车系统的交通预测和路线建议的工作，例如，[23, 25]。

## 结论
在本文中，我们提出了一种基于摩拜（一种主要的无桩共享单车系统）在上海市收集的真实自行车轨迹的数据驱动方法来规划自行车道。我们的系统可以以更加现实的方式解决自行车道规划问题，考虑到城市规划者的约束和要求：1）预算限制，2）施工便利性，和3）自行车道利用率。我们还提出了一个灵活的有益评分函数，用于调整覆盖用户数量和覆盖行程长度之间的偏好。我们证明了所制定的问题是NP-难的，因此我们提出了一种贪婪的网络扩展算法，并提供了两种不同的初始化方法：基于top-k和空间聚类。

我们对大规模的摩拜数据进行了大量实验，并展示了我们提出的自行车道规划框架的有效性。我们观察到了有趣的权衡现象，即基于top-k（或空间聚类）的初始化方法在低（或高）建设预算下表现良好。我们还进行了基于我们路径推荐结果的现场案例研究，并提出了许多重要见解，以提高特定地区的骑行便利性。一个演示系统已经在Microsoft Azure上部署供公众使用，来自上海市徐汇区政府官员的专家反馈确认了我们系统的有效性和可用性。

最后，在未来的工作中，我们计划利用Microsoft Azure中的并行计算框架来提高系统响应时间，以更高效地处理更大的轨迹数据集。此外，我们希望进一步探索交互式规划过程，以融入更多人类智能。